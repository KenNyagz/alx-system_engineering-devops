#configuring haproxy load balancer to do SSL termination to http requests
#!/usr/bin/....

sudo apt update
sudo apt install snapd
sudo apt-get remove certbot
sudo apt-get install certbot
sudo certbot certonly --standalone --preferred-challenges http --http-01-port 80 -d example.com -d example2.com
sudo ls /etc/letsencrypt/live/your_domain_name
sudo mkdir -p /etc/haproxy/certs
DOMAIN='example.com' sudo -E bash -c 'cat /etc/letsencrypt/live/$DOMAIN/privekey.pem > /etc/haproxy/certs/$DOMAIN.pem'
sudo nano /etc/haproxy/haproxy.cfg  # Adjust contents to be similar to '100-redirect..-https' for both frontend configs(http and https)
